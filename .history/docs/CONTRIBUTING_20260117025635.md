# Contributing to notCringe

Thank you for your interest in contributing to notCringe! This document provides guidelines and instructions for contributing to the project.

## Table of Contents

- [Code of Conduct](#code-of-conduct)
- [Getting Started](#getting-started)
- [Development Setup](#development-setup)
- [Project Structure](#project-structure)
- [Coding Standards](#coding-standards)
- [Making Changes](#making-changes)
- [Testing](#testing)
- [Submitting Changes](#submitting-changes)
- [Review Process](#review-process)

---

## Code of Conduct

### Our Pledge

We are committed to providing a welcoming and inclusive environment. All contributors are expected to:

- Use welcoming and inclusive language
- Be respectful of differing viewpoints
- Accept constructive criticism gracefully
- Focus on what's best for the community
- Show empathy towards other contributors

### Unacceptable Behavior

- Harassment, trolling, or personal attacks
- Publishing others' private information
- Unprofessional conduct

---

## Getting Started

### Prerequisites

Before contributing, ensure you have:

- Node.js 18 or higher
- npm, yarn, pnpm, or bun
- PostgreSQL (or use a hosted service like Supabase)
- OpenAI API key
- Git

### Finding Issues to Work On

1. Check the [Issues](https://github.com/your-org/notcringe/issues) page
2. Look for issues tagged with:
   - `good first issue` - Great for newcomers
   - `help wanted` - Community input needed
   - `bug` - Fix something broken
   - `enhancement` - Add new features

3. Comment on the issue to claim it

---

## Development Setup

### 1. Fork and Clone

```bash
# Fork the repository on GitHub, then:
git clone https://github.com/YOUR_USERNAME/notcringe.git
cd notcringe
```

### 2. Install Dependencies

```bash
npm install
# or
yarn install
# or
pnpm install
# or
bun install
```

### 3. Environment Setup

Create a `.env` file in the root directory:

```bash
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/notcringe"

# OpenAI
OPENAI_API_KEY="sk-..."

# Optional: For development
NODE_ENV="development"
```

### 4. Database Setup

```bash
# Generate Prisma client
npm run db:generate

# Run migrations
npm run db:migrate

# (Optional) Open Prisma Studio to view data
npm run db:studio
```

### 5. Start Development Server

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) to see the app.

---

## Project Structure

```
notcringe/
â”œâ”€â”€ app/                  # Next.js App Router
â”‚   â”œâ”€â”€ page.tsx          # Landing page
â”‚   â”œâ”€â”€ layout.tsx        # Root layout
â”‚   â”œâ”€â”€ globals.css       # Global styles
â”‚   â””â”€â”€ api/              # API routes
â”‚       â””â”€â”€ generate/
â”‚           â””â”€â”€ route.ts  # Main generation endpoint
â”œâ”€â”€ components/           # React components
â”‚   â”œâ”€â”€ demo-generator.tsx
â”‚   â””â”€â”€ ui/               # shadcn/ui components
â”œâ”€â”€ lib/                  # Utilities
â”‚   â”œâ”€â”€ utils.ts
â”‚   â””â”€â”€ prisma.ts
â”œâ”€â”€ prisma/               # Database
â”‚   â””â”€â”€ schema.prisma
â”œâ”€â”€ docs/                 # Documentation
â””â”€â”€ public/               # Static assets
```

---

## Coding Standards

### TypeScript

- **Always use TypeScript** - No plain JavaScript files
- **Strict mode enabled** - Follow `tsconfig.json` settings
- **Type everything** - Avoid `any` unless absolutely necessary
- **Use interfaces for object shapes**

```typescript
// Good
interface ReplyProps {
  text: string
  category: "SAFE" | "INTERESTING" | "BOLD"
  tags: string[]
}

// Avoid
type ReplyProps = any
```

### React Components

- **Use functional components** with hooks
- **Prefer "use client" only when needed** (form interactions, state)
- **Extract reusable logic** into custom hooks
- **Keep components focused** - Single responsibility

```tsx
// Good: Client component for interactivity
"use client"

export function DemoGenerator() {
  const [loading, setLoading] = useState(false)
  // ...
}

// Good: Server component for static content
export function LandingHero() {
  return <section>...</section>
}
```

### Naming Conventions

| Type | Convention | Example |
|------|-----------|---------|
| Files | kebab-case | `demo-generator.tsx` |
| Components | PascalCase | `DemoGenerator` |
| Functions | camelCase | `generateReplies()` |
| Constants | UPPER_SNAKE_CASE | `MAX_REPLIES` |
| Enums | PascalCase | `ReplyCategory` |

### Code Formatting

We use Prettier (to be configured):

```bash
npm run format  # (to be added)
```

**Rules:**
- 2 spaces for indentation
- Double quotes for strings
- Semicolons required
- Trailing commas in objects/arrays

### Comments

- **Write self-documenting code** - Use clear names
- **Comment "why," not "what"** - Code shows what it does
- **Use JSDoc for public APIs**

```typescript
/**
 * Generates replies for a social media post
 * @param postText - The original post text
 * @param options - Generation options (vibe, risk, etc.)
 * @returns Array of ranked replies
 */
async function generateReplies(
  postText: string,
  options: GenerateOptions
): Promise<Reply[]> {
  // ...
}
```

---

## Making Changes

### Branch Naming

Create a descriptive branch:

```bash
git checkout -b feature/add-voice-profiles
git checkout -b fix/api-validation-error
git checkout -b docs/improve-readme
```

**Prefixes:**
- `feature/` - New features
- `fix/` - Bug fixes
- `docs/` - Documentation
- `refactor/` - Code refactoring
- `test/` - Adding tests
- `chore/` - Maintenance tasks

### Commit Messages

Follow [Conventional Commits](https://www.conventionalcommits.org/):

```
<type>(<scope>): <description>

[optional body]

[optional footer]
```

**Types:**
- `feat:` - New feature
- `fix:` - Bug fix
- `docs:` - Documentation
- `style:` - Formatting (no code change)
- `refactor:` - Code restructuring
- `test:` - Adding tests
- `chore:` - Maintenance

**Examples:**

```bash
feat(api): add voice profile endpoint
fix(ui): resolve copy button not working
docs(readme): add contributing guidelines
refactor(generate): extract ranking logic
```

### Code Quality Checklist

Before submitting, ensure:

- [ ] Code follows TypeScript best practices
- [ ] No console.logs or debugging code
- [ ] All imports are organized
- [ ] No unused variables or imports
- [ ] Error handling is present
- [ ] Edge cases are considered
- [ ] Comments are clear and helpful
- [ ] Performance implications considered

---

## Testing

### Running Tests

```bash
npm test  # (to be configured)
```

### Test Coverage

Aim for:
- **Unit tests** for utilities and helpers
- **Integration tests** for API routes
- **E2E tests** for critical user flows (optional)

### Writing Tests

Example test structure:

```typescript
// __tests__/lib/utils.test.ts
import { deriveLengthLabel } from "@/lib/utils"

describe("deriveLengthLabel", () => {
  it("returns 'short' for <= 12 words", () => {
    const result = deriveLengthLabel("This is a short reply")
    expect(result).toBe("short")
  })

  it("returns 'medium' for 13-35 words", () => {
    const text = "This is a medium length reply with enough words to test the function properly"
    const result = deriveLengthLabel(text)
    expect(result).toBe("medium")
  })

  it("returns 'long' for > 35 words", () => {
    const text = "This is a very long reply that contains many words and goes on and on to test the function with a large input string that exceeds the medium threshold"
    const result = deriveLengthLabel(text)
    expect(result).toBe("long")
  })
})
```

---

## Submitting Changes

### 1. Update Your Branch

```bash
# Get latest changes from main
git fetch origin
git rebase origin/main
```

### 2. Push Your Branch

```bash
git push origin feature/your-feature-name
```

### 3. Create a Pull Request

1. Go to GitHub and click "New Pull Request"
2. Fill out the PR template:
   - **Title:** Clear, descriptive summary
   - **Description:** What changed and why
   - **Related Issues:** Link to issue numbers
   - **Screenshots:** If UI changes
   - **Testing:** How you tested the changes

### 4. PR Template

```markdown
## Description
Brief description of the changes.

## Related Issues
Closes #123

## Type of Change
- [ ] Bug fix
- [ ] New feature
- [ ] Breaking change
- [ ] Documentation update

## How Has This Been Tested?
Describe your testing process.

## Screenshots (if applicable)
Add screenshots for UI changes.

## Checklist
- [ ] My code follows the project's style guidelines
- [ ] I have performed a self-review
- [ ] I have commented my code where needed
- [ ] I have updated the documentation
- [ ] My changes generate no new warnings
- [ ] I have added tests that prove my fix/feature works
```

---

## Review Process

### What to Expect

1. **Initial review** - Within 2-3 days
2. **Feedback** - Reviewers may request changes
3. **Iteration** - Update your PR based on feedback
4. **Approval** - Once approved, maintainers will merge

### Review Criteria

Reviewers will check for:

- **Functionality** - Does it work as intended?
- **Code quality** - Is it readable and maintainable?
- **Performance** - Any performance concerns?
- **Security** - Any security risks?
- **Tests** - Are there adequate tests?
- **Documentation** - Is documentation updated?

### Responding to Feedback

- Be open to suggestions
- Ask questions if feedback is unclear
- Make changes in new commits (don't force-push)
- Respond to each comment when done

---

## Common Tasks

### Adding a New API Endpoint

1. Create new route in `app/api/your-endpoint/route.ts`
2. Define Zod schemas for request/response
3. Implement handler function
4. Add error handling
5. Document in `docs/API.md`
6. Add tests

### Adding a New UI Component

1. Create component in `components/`
2. Use TypeScript with proper types
3. Follow shadcn/ui patterns for styling
4. Make it accessible (ARIA labels, keyboard nav)
5. Document props with JSDoc
6. Add to Storybook (if configured)

### Updating the Database Schema

1. Edit `prisma/schema.prisma`
2. Run `npm run db:migrate` to create migration
3. Run `npm run db:generate` to update Prisma client
4. Update related TypeScript types
5. Document schema changes

### Adding a New Vibe or Persona

1. Update type definitions in relevant files
2. Add to prompt engineering logic in `app/api/generate/route.ts`
3. Update UI dropdowns in `components/demo-generator.tsx`
4. Add to label maps
5. Document in `docs/API.md`

---

## Getting Help

### Resources

- **Documentation:** `docs/` folder
- **PRD:** `PRD.md` for product context
- **Architecture:** `docs/ARCHITECTURE.md`
- **API Docs:** `docs/API.md`

### Communication

- **GitHub Issues:** For bugs and feature requests
- **GitHub Discussions:** For questions and ideas
- **Discord:** (if set up) For real-time chat

### Ask Questions

Don't hesitate to:
- Comment on issues
- Ask in your PR
- Reach out to maintainers

We're here to help!

---

## Recognition

Contributors will be:
- Listed in `CONTRIBUTORS.md`
- Credited in release notes
- Given shoutouts on social media (if you want)

---

## License

By contributing to notCringe, you agree that your contributions will be licensed under the project's license (MIT or similar - to be confirmed).

---

## Additional Notes

### Design Decisions

When making significant changes:
1. Open an issue first to discuss
2. Wait for maintainer approval
3. Then implement and submit PR

### Breaking Changes

If your change breaks the API or existing functionality:
1. Clearly mark it in the PR title: `[BREAKING]`
2. Explain the impact in the description
3. Provide migration guide if applicable

### Performance

For performance-critical changes:
- Benchmark before and after
- Include results in PR description
- Consider edge cases (large inputs, slow networks)

---

## Thank You! ðŸŽ‰

Your contributions make notCringe better for everyone. We appreciate your time and effort!

If you have questions or suggestions for improving this guide, please open an issue.
